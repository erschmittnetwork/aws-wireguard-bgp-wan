%%{init: {'theme':'default','flowchart':{'htmlLabels': true, 'nodeSpacing':90, 'rankSpacing': 90}}}%%
graph TD
  subgraph Sites["Spoke Sites (VMware - Ubuntu 24.04 LTS)"]
    direction TB
    SITE1["SITE1-LF1<br/>(Spoke)"]
    SITE2["SITE2-LF1<br/>(Spoke)"]
    SITE3["SITE3-LF1<br/>(Spoke)"]
  end

  subgraph AWS["AWS VPC (us-east-1)"]
    direction TB
    HUB["DC1 Hub<br/>(EIP-associated)<br/>DC1-SP1 active OR<br/>DC1-SP2 standby"]
    HUB2["DC1-SP2<br/>(Standby)<br/>Assumes EIP on failover"]
  end

  SITE1 -->|"WireGuard underlay<br/>BGP overlay"| HUB
  SITE2 -->|"WireGuard underlay<br/>BGP overlay"| HUB
  SITE3 -->|"WireGuard underlay<br/>BGP overlay"| HUB

  HUB -->|"AWS automation:<br/>EventBridge + Lambda<br/>(EIP reassociation)"| HUB2
